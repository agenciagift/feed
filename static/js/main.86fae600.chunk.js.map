{"version":3,"sources":["firebase/config.js","hooks/useAuth.ts","constants/colors.js","constants/sizes.js","components/form.js","components/layout.js","components/messages.js","components/AddLink/PublishForm.js","constants/appConfig.js","firebase/links.js","context/AppReducer.ts","context/GlobalContext.js","hooks/useScrape.js","components/AddLink/useAddLinkState.js","components/AddLink/index.js","assets/icons/Loupe.js","components/Search/styled.js","components/Search/index.js","components/UserMenu/styled.js","components/UserMenu/index.js","components/UserAvatar/styled.js","components/UserAvatar/index.js","components/UserAvatar/user-offline.png","components/Header/styled.js","components/Header/index.js","assets/icons/Heart.js","firebase/stats.js","firebase/userCollections.js","hooks/useUserCollection.ts","components/LinkItem/styled.js","components/LinkItem/DeleteButton.js","components/LinkItem/InteractionToolBar.js","components/LinkItem/index.js","components/LinkList/styled.js","components/LinkList/index.js","App.js","serviceWorker.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","authentication","auth","projectFirestore","firestore","timestamp","FieldValue","serverTimestamp","signInProviders","google","GoogleAuthProvider","facebook","FacebookAuthProvider","github","GithubAuthProvider","twitter","TwitterAuthProvider","getSignInProvider","method","defaultUserConfig","admin","moderator","owner","useAuth","useState","user","setUser","error","setError","userConfig","setUserConfig","useEffect","onAuthStateChanged","collection","doc","uid","get","then","docData","data","signIn","signInWithPopup","catch","signOut","grey","createButtonPallete","color","bg","hover","active","css","uiColors","idle","buttonColorsCss","primary","naked","EXTRA_SMALL","SMALL","MEDIUM","LARGE","EXTRA_LARGE","baseFormControlStyle","expand","BaseInput","styled","input","BaseTextArea","textarea","BaseButton","button","NakedButton","Wrapper","div","VerticalLayout","HorizontalLayout","wrap","breakUnder","BasePreviewImage","img","Message","p","ErrorMessage","PublishForm","image","title","description","setTitle","setDescription","src","alt","placeholder","value","onChange","e","target","logo","width","height","collections","tokenize","fullText","tokensArray","trim","toLowerCase","split","filter","s","length","Set","actionTypes","initialState","nextItem","startAfter","search","loading","ended","links","stats","AppReducer","state","action","type","payload","snap","documents","last","forEach","push","id","PAGE_SIZE","pop","docs","size","parseDocs","newItems","exists","GlobalContext","createContext","GlobalProvider","children","useReducer","dispatch","searchTerm","collRef","orderBy","startAt","limit","tokens","where","createLinksRef","onSnapshot","add","a","response","remove","delete","Provider","next","requestSearch","text","urlRegex","fetchScraping","uri","fetch","resp","ok","json","SCRAPE_CACHE","Map","useScrape","setState","isUrlValid","setIsUrlValid","match","cache","has","set","encodeURIComponent","tryFetchScraping","fetchedAt","scrapeResponse","useAddLinkState","useContext","url","setUrl","setImage","scrape","fail","message","delay","setTimeout","images","createNewPost","displayName","photoURL","author","createdAt","keywords","addLink","preventDefault","showPublishForm","actions","newUrl","AddLink","onSubmit","Loupe","version","viewBox","xmlns","d","fill","SearchForm","form","focus","SearchInput","SearchButton","SearchButtonImg","Search","setText","setFocus","onFocus","onBlur","UserMenuContainer","UserMenuList","ul","UserMenuText","UserMenuButton","UserMenu","showMenu","setShowMenu","close","SignInButton","onClick","SignOutButton","UserAvatarContainer","UserAvatarButton","UserAvatarImg","UserAvatar","userAvatar","ref","useRef","handleClickOutside","event","current","contains","document","addEventListener","removeEventListener","HeaderContainer","header","HeaderWrapper","Header","Heart","getStatsByLinkId","getUserCollection","collectionName","collectionRef","collectionData","addLinkToCollection","console","log","linkRef","link","batch","items","Array","includes","update","name","count","likes","merge","commit","removeLinkFromCollection","item","useUserCollection","reference","setReference","setCollection","warn","LinkItemWrapper","li","LinkItemLink","LinkMetadata","LinkPreviewImage","InteractionToolBarWrapper","LinkInteractionButton","activeColor","LinkItemButtonLabel","span","DeleteButton","InteractionToolBar","isLiked","setIsLiked","likesCollection","linkStats","find","isArray","isIncluded","LinkItem","date","toDate","Function","Date","getDate","href","rel","toLocaleString","map","index","LinkListWrapper","LinkListHeader","LinkFilterButton","LinkListElement","NextButton","NextLoadingMessage","LoadMore","empty","LinkList","App","Boolean","window","location","hostname","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.86fae600.chunk.js","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyDrYdVo7ZeWU3AVYX8iFo7qWAK6gCpMgwQ\",\n    authDomain: \"agencia-gift.firebaseapp.com\",\n    projectId: \"agencia-gift\",\n    storageBucket: \"agencia-gift.appspot.com\",\n    messagingSenderId: \"404011545951\",\n    appId: \"1:404011545951:web:7f4a77ec0dce84fb6432ea\",\n    measurementId: \"G-KE55SGFC5L\"\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nconst authentication = firebase.auth();\nconst projectFirestore = firebase.firestore();\nconst timestamp = firebase.firestore.FieldValue.serverTimestamp;\n\nconst signInProviders = {\n    google: new firebase.auth.GoogleAuthProvider(),\n    facebook: new firebase.auth.FacebookAuthProvider(),\n    github: new firebase.auth.GithubAuthProvider(),\n    twitter: new firebase.auth.TwitterAuthProvider(),\n};\n\nconst getSignInProvider = (method = 'google') => {\n    return signInProviders[method];\n};\n\nexport {\n    getSignInProvider,\n    authentication,\n    projectFirestore,\n    timestamp,\n};\n","import firebase from 'firebase/app';\nimport { useEffect, useState } from \"react\";\nimport { authentication, getSignInProvider, projectFirestore } from \"../firebase/config\";\n\ntype UserConfig = {\n    admin: boolean;\n    moderator: boolean;\n    owner: boolean;\n};\n\nconst defaultUserConfig: UserConfig = {\n    admin: false,\n    moderator: false,\n    owner: false,\n};\n\nconst useAuth = () => {\n    const [user, setUser] = useState<firebase.User | null>(null);\n    const [error, setError] = useState(null);\n    const [userConfig, setUserConfig] = useState<UserConfig>(defaultUserConfig);\n    const signIn = (method = 'google') => {\n        setError(null);\n        authentication\n            .signInWithPopup(getSignInProvider(method))\n            .catch((error) => setError(error));\n    }\n    const signOut = () => authentication.signOut();\n\n    useEffect(() => {\n        const unsub = authentication.onAuthStateChanged(setUser);\n        return unsub;\n    }, [setUser]);\n\n    useEffect(() => {\n        if (!user) {\n            setUserConfig(defaultUserConfig);\n            return;\n        }\n\n        projectFirestore.collection('userConfig')\n            .doc(user.uid)\n            .get()\n            .then(doc => {\n                const docData = doc.data();\n                const data: UserConfig = docData\n                    ? {\n                        admin: docData.admin,\n                        moderator: docData.moderator,\n                        owner: docData.owner,\n                    }\n                    : defaultUserConfig;\n                setUserConfig(data);\n            });\n    }, [user]);\n\n    return { user, error, userConfig, signIn, signOut }\n};\n\nexport default useAuth;\n","import { css } from \"styled-components\";\n\nexport const grey = {\n    light: '#e7e7e7',\n    mid: '#999',\n    dark: '#666',\n};\n\nexport const createButtonPallete = (color, bg, hover, active) => css`\n    color: ${color};\n    background-color: ${bg};\n\n    &:hover, &:focus {\n        background-color: ${hover || bg};\n    }\n\n    &:active {\n        background-color: ${active || hover || bg};\n    }\n`;\n\nexport const uiColors = {\n    idle: '#0062b5',\n    hover: '#008aff',\n    active: '#0062b5',\n    error: 'red',\n};\n\nexport const buttonColorsCss = {\n    primary: createButtonPallete('#fff', uiColors.idle, uiColors.hover, uiColors.active),\n    naked: createButtonPallete(uiColors.idle, 'transparent', grey.light),\n};\n","export const EXTRA_SMALL = '4px';\nexport const SMALL = '8px';\nexport const MEDIUM = '16px';\nexport const LARGE = '32px';\nexport const EXTRA_LARGE = '64px';\n\nexport const CONTENT_WIDTH = '800px';\n","import styled, { css } from \"styled-components\";\nimport { buttonColorsCss, grey } from \"../constants/colors\";\nimport { MEDIUM, SMALL } from \"../constants/sizes\";\n\nconst baseFormControlStyle = css`\n    font: inherit;\n    line-height: 1.5;\n    padding: ${SMALL} ${MEDIUM};\n    border: 1px solid ${grey.mid};\n    border-radius: 4px;\n\n    ${({ expand }) => expand && css`\n        flex: 1;\n    `}\n`;\n\nexport const BaseInput = styled.input`\n    ${baseFormControlStyle}\n`;\n\nexport const BaseTextArea = styled.textarea`\n    ${baseFormControlStyle}\n    min-height: 6em;\n`;\n\nexport const BaseButton = styled.button`\n    ${baseFormControlStyle}\n    ${buttonColorsCss.primary}\n    display: inline-block;\n    vertical-align: middle;\n    cursor: pointer;\n`;\n\nexport const NakedButton = styled(BaseButton)`\n    ${buttonColorsCss.naked}\n    border: 0 none;\n`;\n","import styled, { css } from \"styled-components\";\nimport { CONTENT_WIDTH, EXTRA_SMALL, MEDIUM, SMALL } from \"../constants/sizes\";\n\nexport const Wrapper = styled.div`\n    margin: auto;\n    padding-left: ${MEDIUM};\n    padding-right: ${MEDIUM};\n    max-width: ${CONTENT_WIDTH};\n`;\n\nexport const VerticalLayout = styled.div`\n    display: flex;\n    flex-direction: column;\n\n    ${({ expand }) => expand && css`\n        flex: 1;\n    `}\n\n    > * {\n        margin-top: ${EXTRA_SMALL};\n        margin-bottom: ${EXTRA_SMALL};\n    }\n`;\n\nexport const HorizontalLayout = styled.div`\n    display: flex;\n    justify-content: space-between;\n\n    ${({ wrap }) => wrap && css`\n        flex-wrap: wrap;\n    `}\n\n    ${({ breakUnder }) => breakUnder && css`\n        @media (max-width: ${breakUnder}px) {\n            flex-direction: column;\n        }\n    `}\n`;\n\nexport const BasePreviewImage = styled.img`\n    align-self: stretch;\n    width: 200px;\n    object-fit: contain;\n    object-position: top;\n    margin-top: ${EXTRA_SMALL};\n    margin-bottom: ${EXTRA_SMALL};\n    margin-right: ${SMALL};\n`;\n","import styled from \"styled-components\";\nimport { uiColors } from \"../constants/colors\";\n\nexport const Message = styled.p`\n    color: ${uiColors.hover};\n`;\n\nexport const ErrorMessage = styled(Message)`\n    color: ${uiColors.error};\n`;\n","import { BaseButton, BaseInput, BaseTextArea } from \"../form\";\nimport { BasePreviewImage, HorizontalLayout, VerticalLayout } from \"../layout\";\n\nconst PublishForm = ({\n    image, title, description, setTitle, setDescription,\n}) => (\n    <HorizontalLayout>\n        {image && (\n            <BasePreviewImage\n                src={image}\n                alt=\"Imagem encontrada.\" />\n        )}\n\n        <VerticalLayout expand>\n            <BaseInput\n                placeholder=\"Title...\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)} />\n\n            <BaseTextArea\n                expand\n                placeholder=\"Description...\"\n                value={description}\n                onChange={(e) => setDescription(e.target.value)} />\n\n            <BaseButton>Publicar</BaseButton>\n        </VerticalLayout>\n    </HorizontalLayout>\n);\n\nexport default PublishForm;\n","export const logo = {\n    src: 'https://agenciagift.github.io/favicon.png',\n    alt: 'Agência Gift',\n    width: 49.25,\n    height: 50,\n};\n\nexport const collections = {\n    LINKS: 'links',\n    STATS: 'stats',\n    USERS: 'users',\n};\n","import { collections } from \"../constants/appConfig\";\nimport { projectFirestore } from \"./config\";\n\nconst PAGE_SIZE = 10;\n\nexport const tokenize = (fullText) => {\n    const tokensArray = fullText.trim().toLowerCase()\n        .split(/[^a-zA-Z\\u00C0-\\u017F]+/)\n        .filter(s => s && s.length > 2);\n    const result = [...new Set(tokensArray)];\n    return result;\n};\n\nexport const createLinksRef = (nextItem, searchTerm) => {\n    const collRef = projectFirestore.collection(collections.LINKS)\n        .orderBy('createdAt', 'desc')\n        .startAt(nextItem)\n        .limit(PAGE_SIZE + 1);\n\n    if (searchTerm) {\n        const tokens = tokenize(searchTerm);\n        if (tokens.length) {\n            return collRef.where('keywords', 'array-contains-any', tokens);\n        }\n    }\n\n    return collRef;\n};\n\nexport const parseDocs = (snap) => {\n    let documents = [];\n    let last = null;\n    snap.forEach(doc => {\n        documents.push({ ...doc.data(), id: doc.id });\n    });\n    if (documents.length === PAGE_SIZE + 1) {\n        documents.pop();\n        last = snap.docs[snap.size - 1];\n    }\n    return [documents, last];\n};\n","import firebase from 'firebase/app';\nimport { parseDocs } from \"../firebase/links\";\n\nexport const actionTypes = {\n    LOADING: 'LOADING',\n    SET_STATS: 'SET_STATS',\n    SET_LINKS: 'SET_LINKS',\n    ADD_LINK: 'ADD_LINK',\n    REMOVE_LINK: 'REMOVE_LINK',\n    REQUEST_SEARCH: 'REQUEST_SEARCH',\n    REQUEST_NEXT_PAGE: 'REQUEST_NEXT_PAGE',\n}\n\ntype Link = {\n    id: string;\n};\n\ntype Stat = {\n    id: string;\n    likes: number;\n};\n\ntype GlobalState = {\n    nextItem: firebase.firestore.DocumentData;\n    startAfter: firebase.firestore.DocumentData;\n    search: string;\n    loading: boolean;\n    ended: boolean;\n    links: Link[];\n    stats: Stat[];\n};\n\ntype Action = {\n    type: string,\n    payload: any,\n}\n\nexport const initialState: GlobalState = {\n    nextItem: {},\n    startAfter: {},\n    search: '',\n    loading: false,\n    ended: false,\n    links: [],\n    stats: [],\n};\n\nconst AppReducer = (state: GlobalState, action: Action) => {\n    switch (action.type) {\n        case actionTypes.LOADING:\n            return {\n                ...state,\n                loading: true,\n            };\n\n        case actionTypes.SET_STATS:\n            return {\n                ...state,\n                stats: action.payload,\n            };\n\n        case actionTypes.SET_LINKS:\n            const [newItems, nextItem] = parseDocs(action.payload);\n            const links = state.startAfter.exists\n                ? [...state.links, ...newItems]\n                : newItems;\n            return {\n                ...state,\n                loading: false,\n                links,\n                nextItem,\n                ended: !nextItem,\n            };\n\n        case actionTypes.ADD_LINK:\n            return {\n                ...state,\n                links: [\n                    action.payload,\n                    ...state.links,\n                ],\n            };\n\n        case actionTypes.REMOVE_LINK:\n            return {\n                ...state,\n                links: state.links.filter(({ id }) => action.payload !== id),\n            };\n\n        case actionTypes.REQUEST_NEXT_PAGE:\n            return {\n                ...state,\n                startAfter: state.nextItem || {},\n            };\n\n        case actionTypes.REQUEST_SEARCH:\n            return {\n                ...initialState,\n                search: action.payload,\n            };\n\n        default:\n            return state;\n    }\n};\n\nexport default AppReducer;\n","import { createContext, useEffect, useReducer } from \"react\";\nimport { collections } from \"../constants/appConfig\";\nimport { projectFirestore } from \"../firebase/config\";\nimport { createLinksRef } from \"../firebase/links\";\nimport AppReducer, { actionTypes, initialState } from \"./AppReducer\";\n\nexport const GlobalContext = createContext(initialState);\n\nexport const GlobalProvider = ({ children }) => {\n    const [state, dispatch] = useReducer(AppReducer, initialState);\n\n    const requestSearch = (text) => {\n        dispatch({\n            type: actionTypes.REQUEST_SEARCH,\n            payload: text,\n        });\n    };\n\n    useEffect(() => {\n        dispatch({ type: actionTypes.LOADING });\n        createLinksRef(state.startAfter, state.search).get().then(payload => {\n            dispatch({ type: actionTypes.SET_LINKS, payload });\n        });\n    }, [state.search, state.startAfter]);\n\n    useEffect(() => {\n        projectFirestore.collection(collections.STATS).onSnapshot((snap) => {\n            let payload = [];\n            snap.forEach(doc => {\n                payload.push({ ...doc.data(), id: doc.id });\n            });\n\n            dispatch({ type: actionTypes.SET_STATS, payload });\n        });\n    }, []);\n\n    const next = () => dispatch({ type: actionTypes.REQUEST_NEXT_PAGE });\n\n    const add = async (payload) => {\n        const response = await projectFirestore.collection(collections.LINKS).add(payload);\n        dispatch({ type: actionTypes.ADD_LINK, payload: { ...payload, id: response.id } });\n    };\n\n    const remove = async (payload) => {\n        await projectFirestore.collection(collections.LINKS).doc(payload).delete();\n        dispatch({ type: actionTypes.REMOVE_LINK, payload });\n    };\n\n    return (\n        <GlobalContext.Provider value={{\n            ...state,\n            next,\n            add,\n            remove,\n            requestSearch,\n        }}>\n            {children}\n        </GlobalContext.Provider>\n    )\n};\n","import { useEffect, useState } from \"react\";\nimport { projectFirestore, timestamp } from \"../firebase/config\";\n\nconst urlRegex = /^(http(s)?:\\/\\/.)(www\\.)?[-a-zA-Z0-9@:%._+~#=]+\\.[a-z]{2,}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*)?/;\n\nconst SCRAPING_API_URL = 'https://gift-scraper.herokuapp.com/scrape/?format=json';\n\nconst fetchScraping = async (uri) => {\n    const json = await fetch(`${SCRAPING_API_URL}&url=${uri}`)\n        .then(resp => resp.ok && resp.json());\n    return json || {};\n};\n\nconst SCRAPE_CACHE = new Map();\n\nconst useScrape = (uri) => {\n    const [state, setState] = useState({ loading: false });\n    const [isUrlValid, setIsUrlValid] = useState(true);\n\n    useEffect(() => {\n        const isUrlValid = !!uri.match(urlRegex);\n        setIsUrlValid(isUrlValid);\n\n        const cache = SCRAPE_CACHE.get(uri);\n        if (cache) {\n            setState({ ...state, ...cache });\n            return;\n        }\n\n        if (!isUrlValid || SCRAPE_CACHE.has(uri)) {\n            return;\n        }\n\n        SCRAPE_CACHE.set(uri, null);\n\n        const doc = projectFirestore.collection('scrape').doc(encodeURIComponent(uri));\n\n        const tryFetchScraping = async () => {\n            try {\n                const fetchedAt = timestamp();\n                const scrapeResponse = await fetchScraping(uri);\n                await doc.set(scrapeResponse);\n                SCRAPE_CACHE.set(uri, scrapeResponse);\n                setState({ ...scrapeResponse, fetchedAt, loading: false });\n            } catch (error) {\n                SCRAPE_CACHE.set(uri, { error });\n                setState({ data: null, error, loading: false });\n            }\n        };\n\n        setState({ data: null, error: null, loading: true });\n\n        doc.get()\n            .then(resp => {\n                const payload = resp.data();\n                if (!payload) {\n                    tryFetchScraping();\n                    return;\n                }\n                SCRAPE_CACHE.set(uri, payload);\n                setState({ ...payload, loading: false });\n            })\n            .catch(error => {\n                setState({ data: null, error, loading: false });\n            });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [uri]);\n\n    const { data, error, loading } = state;\n    return { isUrlValid, data, error, loading };\n};\n\nexport default useScrape;\n","import { useContext, useEffect, useState } from \"react\";\nimport { GlobalContext } from \"../../context/GlobalContext\";\nimport { timestamp } from \"../../firebase/config\";\nimport { tokenize } from \"../../firebase/links\";\nimport useAuth from \"../../hooks/useAuth\";\nimport useScrape from \"../../hooks/useScrape\";\n\nconst useAddLinkState = () => {\n    const { add } = useContext(GlobalContext);\n    const [error, setError] = useState('');\n    const [url, setUrl] = useState('');\n    const [title, setTitle] = useState('');\n    const [description, setDescription] = useState('');\n    const [image, setImage] = useState('');\n\n    const resetState = () => {\n        setError('');\n        setUrl('');\n        setTitle('');\n        setDescription('');\n        setImage('');\n    };\n\n    const { user } = useAuth();\n    const scrape = useScrape(url);\n\n    const fail = (message, delay = 5000) => {\n        setError(message);\n        setTimeout(() => setError(''), delay);\n    };\n\n    useEffect(() => {\n        if (!scrape.data) {\n            setImage('');\n            return;\n        }\n        setTitle(scrape.data.title || '');\n        setDescription(scrape.data.description || '');\n        setImage(scrape.data.images[0] || '');\n    }, [scrape.data]);\n\n    useEffect(() => {\n        if (scrape.error) {\n            fail('Ocorreu um erro ao pesquisar. Verifique se o link está correto e tente novamente', 10000);\n        }\n    }, [scrape.error]);\n\n    const createNewPost = () => {\n        const { uid, displayName, photoURL } = user;\n        return {\n            url,\n            title,\n            description,\n            image,\n            author: { uid, displayName, photoURL },\n            createdAt: timestamp(),\n            keywords: tokenize(`${title} ${description}`),\n        };\n    };\n\n    const addLink = async (e) => {\n        e.preventDefault();\n        setError('');\n\n        if (!url) {\n            fail('Informe o link para compartilhar.');\n            return;\n        }\n\n        try {\n            await add(createNewPost());\n            resetState();\n        } catch (err) {\n            setError(err);\n        }\n    };\n\n    return {\n        state: {\n            error,\n            url,\n            title,\n            description,\n            image,\n            loading: scrape.loading,\n            showPublishForm: scrape.isUrlValid && !scrape.loading,\n        },\n        actions: {\n            setTitle,\n            setDescription,\n            addLink,\n            setUrl: (newUrl) => {\n                setError('');\n                setUrl(newUrl);\n                // avoiding previous data remain in the fields\n                setTitle(newUrl ? title : '');\n                setDescription(newUrl ? description : '');\n                setImage(newUrl ? image : '');\n            },\n        },\n    }\n};\n\nexport default useAddLinkState;\n","import React from 'react';\nimport useAuth from '../../hooks/useAuth';\nimport { BaseInput } from '../form';\nimport { VerticalLayout } from '../layout';\nimport { ErrorMessage, Message } from '../messages';\nimport PublishForm from './PublishForm';\nimport useAddLinkState from './useAddLinkState';\n\nfunction AddLink() {\n    const { state, actions } = useAddLinkState();\n    const { user, error } = useAuth();\n\n    if (error && !user) {\n        return (\n            <ErrorMessage>Erro no login. Tente novamente.</ErrorMessage>\n        );\n    }\n\n    if (!user) {\n        return null;\n    }\n\n    return (\n        <form onSubmit={actions.addLink}>\n            <h4>Compartilhar link</h4>\n\n            <VerticalLayout>\n                <BaseInput\n                    placeholder=\"https://\"\n                    value={state.url}\n                    onChange={(e) => actions.setUrl(e.target.value)} />\n\n                {state.loading && <Message>Carregando...</Message>}\n\n                {state.showPublishForm && <PublishForm {...state} {...actions} />}\n\n                {state.error && (\n                    <ErrorMessage>\n                        Desculpe! Ocorreu um erro inesperado :(\n                    </ErrorMessage>\n                )}\n            </VerticalLayout>\n        </form>\n    );\n}\n\nexport default AddLink;\n","import { grey } from \"../../constants/colors\";\n\nconst Loupe = ({ color = grey.dark }) => {\n    return (\n        <svg version=\"1.1\" viewBox=\"0 0 32 32\" width=\"16px\" height=\"16px\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"m14.043 0.0078125c-5.3701 0.068248-10.449 3.3774-12.68 8.2637-2.2883 4.7601-1.6495 10.664 1.5996 14.826 3.2048 4.2711 8.8267 6.4228 14.064 5.3828h0.003906c1.8669-0.351 3.6187-1.1381 5.2031-2.1836l5.4219 5.4219c0.37413 0.37472 0.98134 0.37472 1.3555 0l2.707-2.707c0.37472-0.37413 0.37472-0.98134 0-1.3555l-5.4375-5.4375c2.8144-4.2212 3.2446-9.843 0.88867-14.361-2.4325-4.881-7.6746-8.0154-13.127-7.8496zm0.10742 5.1816c0.00436 3.96e-5 0.009371 3.96e-5 0.013671 0 3.4522-0.10801 6.8459 1.9236 8.3828 5.0156 0.0023 0.00436 0.005312 0.009372 0.007813 0.013672 1.408 2.6981 1.2799 6.1396-0.24805 8.7656-0.78782 1.2734-2.0081 2.4671-3.2402 3.2695-0.92393 0.55046-1.9484 0.93903-3.0039 1.1367-0.0024 5e-4 -0.003459-5.17e-4 -0.005859 0-3.3047 0.65716-6.9578-0.7419-8.9766-3.4395-0.003322-0.00392-0.0063756-0.007919-0.0097656-0.011719-2.0515-2.6262-2.4647-6.4608-1.0176-9.4629 0.00246-0.004799 0.0035094-0.010825 0.0058594-0.015624 1.4049-3.0821 4.705-5.2305 8.0918-5.2715z\" fill={color}/>\n        </svg>\n    )\n};\n\nexport default Loupe;\n","import styled, { css } from \"styled-components\";\nimport Loupe from \"../../assets/icons/Loupe\";\nimport { createButtonPallete } from \"../../constants/colors\";\nimport { MEDIUM } from \"../../constants/sizes\";\nimport { BaseButton, BaseInput } from \"../form\";\n\nexport const SearchForm = styled.form`\n    display: flex;\n    align-items: center;\n    flex: 1;\n    margin-left: ${MEDIUM};\n    margin-right: ${MEDIUM};\n    border-radius: 999px;\n\n    transition: 0.3s ease-in-out;\n\n    ${({ focus }) => focus && css`\n        background-color: #fff;\n    `}\n`;\n\nexport const SearchInput = styled(BaseInput)`\n    flex: 1;\n    background-color: transparent;\n    border: 0 none;\n\n    &:hover, &:focus {\n        outline: none;\n    }\n\n    &:hover {\n        cursor: pointer;\n    }\n\n    &:focus {\n        cursor: auto;\n    }\n`;\n\nexport const SearchButton = styled(BaseButton)`\n    display: flex;\n    align-items: center;\n    background-color: transparent;\n    border: 0 none;\n    padding-left: 0;\n\n    ${createButtonPallete('transparent', 'transparent')}\n`;\n\nexport const SearchButtonImg = styled(Loupe)`\n    display: block;\n    width: 0.5em;\n    height: 0.5em;\n`;\n","import React, { useContext, useState } from 'react';\nimport { GlobalContext } from '../../context/GlobalContext';\nimport { SearchButton, SearchButtonImg, SearchForm, SearchInput } from './styled';\n\nexport default function Search() {\n    const [text, setText] = useState('');\n    const [focus, setFocus] = useState(false);\n    const { requestSearch } = useContext(GlobalContext);\n\n    const submitForm = (e) => {\n        e.preventDefault();\n        requestSearch(text);\n    };\n\n    return (\n        <SearchForm onSubmit={submitForm} focus={focus}>\n            <SearchInput\n                type=\"text\"\n                placeholder={focus ? '' : 'Clique para pesquisar'}\n                value={text}\n                onChange={(e) => setText(e.target.value)}\n                onFocus={() => setFocus(true)}\n                onBlur={() => setFocus(false)} />\n            {focus && <SearchButton>\n                <SearchButtonImg />\n            </SearchButton>}\n        </SearchForm>\n    )\n}\n","import styled from \"styled-components\";\nimport { createButtonPallete, grey } from \"../../constants/colors\";\nimport { MEDIUM, SMALL } from \"../../constants/sizes\";\n\nexport const UserMenuContainer = styled.div`\n    position: absolute;\n    top: 100%;\n    right: 0;\n    min-width: 200px;\n    margin-top: ${MEDIUM};\n    background-color: #fff;\n    border-radius: 4px;\n    filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));\n\n    &:before {\n        content: '';\n        position: absolute;\n        right: 16px;\n        bottom: 100%;\n        border-width: 0 ${SMALL} ${SMALL};\n        border-style: solid;\n        border-color: transparent transparent #fff;\n    }\n`;\n\nexport const UserMenuList = styled.ul`\n    list-style: none;\n    margin: 0;\n    padding: 0;\n`;\n\nexport const UserMenuText = styled.p`\n    margin: ${MEDIUM};\n    font-size: 0.75em;\n`;\n\nexport const UserMenuButton = styled.button`\n    display: block;\n    width: 100%;\n    border: 0 none;\n    padding: ${MEDIUM};\n\n    white-space: nowrap;\n    font: inherit;\n    text-align: left;\n\n    ${createButtonPallete('currentColor', 'transparent', grey.light)}\n`;\n","import useAuth from '../../hooks/useAuth';\nimport { UserMenuButton, UserMenuContainer, UserMenuList, UserMenuText } from \"./styled\";\n\nconst UserMenu = ({ showMenu, setShowMenu }) => {\n    const { user, signIn, signOut } = useAuth();\n\n    if (!showMenu) {\n        return null;\n    }\n\n    const close = () => setShowMenu(false);\n\n    const SignInButton = ({ method, children }) => {\n        return (\n            <UserMenuButton\n                onClick={() => {\n                    signIn(method);\n                    close();\n                }}>\n                {children}\n            </UserMenuButton>\n        );\n    };\n\n    const SignOutButton = () => (\n        <UserMenuButton\n            onClick={() => {\n                signOut();\n                close();\n            }}>\n            Sair\n        </UserMenuButton>\n    );\n\n    return (\n        <UserMenuContainer>\n            {user\n                ? (\n                    <>\n                        <UserMenuText>\n                            {user.displayName}\n                        </UserMenuText>\n                        <UserMenuList>\n                            <li>\n                                <SignOutButton />\n                            </li>\n                        </UserMenuList>\n                    </>\n                )\n                : (\n                    <>\n                        <UserMenuList>\n                            <li>\n                                <SignInButton method='google'>\n                                    Entrar com Google\n                                </SignInButton>\n                            </li>\n                            <li>\n                                <SignInButton method='facebook'>\n                                    Entrar com Facebook\n                                </SignInButton>\n                            </li>\n                        </UserMenuList>\n                    </>\n                )\n            }\n        </UserMenuContainer>\n    );\n};\n\nexport default UserMenu;\n","import styled from \"styled-components\";\nimport { createButtonPallete, uiColors } from \"../../constants/colors\";\n\nexport const UserAvatarContainer = styled.div`\n    position: relative;\n`;\n\nexport const UserAvatarButton = styled.button`\n    ${createButtonPallete('currentColor', 'transparent')}\n    padding: 0;\n    border: 1px solid #fff;\n    border-radius: 50%;\n    overflow: hidden;\n\n    &:hover, &:focus, &:active {\n        border-color: ${uiColors.hover};\n    }\n`;\n\nexport const UserAvatarImg = styled.img`\n    display: block;\n    width: 46px;\n    height: 46px;\n`;\n","import { useEffect, useRef, useState } from 'react';\nimport useAuth from '../../hooks/useAuth';\nimport UserMenu from '../UserMenu';\nimport { UserAvatarButton, UserAvatarContainer, UserAvatarImg } from './styled';\nimport userOffline from './user-offline.png';\n\nexport default function UserAvatar() {\n    const [showMenu, setShowMenu] = useState(false);\n    const { user } = useAuth();\n    const userAvatar = {\n        src: user ? user.photoURL : userOffline,\n        alt: user ? user.displayName : 'Faça login',\n    };\n\n    const ref = useRef(null);\n\n    const handleClickOutside = (event) => {\n        if (ref.current && !(ref.current.contains(event.target))) {\n            setShowMenu(false);\n        }\n    };\n\n    useEffect(() => {\n        document.addEventListener('click', handleClickOutside, true);\n        return () => {\n            document.removeEventListener('click', handleClickOutside, true);\n        };\n    });\n\n    return (\n        <UserAvatarContainer ref={ref}>\n            <UserAvatarButton onClick={() => setShowMenu(!showMenu)}>\n                <UserAvatarImg\n                    src={userAvatar.src}\n                    alt={userAvatar.alt} />\n            </UserAvatarButton>\n            <UserMenu showMenu={showMenu} setShowMenu={setShowMenu} />\n        </UserAvatarContainer>\n    );\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAATdAAAE3QBedN++wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS2SURBVHic5ZvNixxFGMZ/1buQj90EIbIbZgmDUQyIEEhyDB5CMBiSETUQ9KKEnMRIFOKeNH+AEE/xoJDkENB4iosERJnMxZtZIZLFHFzIYVcd8SPmazeweT1U9aSnnd7t6n6rd+I88J62+3mf99maqur6MCJCSBhjRoA9wJNArUcAzPeIn4GmiNwJqi+EAcaYMaABvAjsBdYWpFoAvgW+BKZEpK2jMAERUQlgDXAM+A5YAkQ5lhz3MWCNmm6FwiPgdeBGgKKz4obLGa2qAcB+4GqFhafjKrC/cgOAOnB5FQtPx2WgXokBwG6g3QdFp6MN7A5qAHAEWOyDYrNiETiibgAwBJzqgwLzxilgSMUAV/zFACJngS9czAbgv5jHhDwGaP7nLwD7gE098mxyf/tcsyWUMgD7m9cQ8jtwyKOveRn4TSn3sn3CSr29Rof3NTDm3TvD48BXCvkXWWZ0yEpeR2eomwMe8y0+oWMjOjPMNhnzhKzELaXm90LR4hNanlfS0splAHBAKeGnZYtPaPpESdOBZQ3ADnnXlJJtUzRgm5Kma6SGxnSio0qJbuLWGpQMMI5TQ9vRngYA67GdlkaSplbxCX1NJW1zwPqYN+Ih3uThElVZfK/EE4Kzhq0VoMuAw0oJwDZXbWhydmqNAIwxE8BOxQSaXCE4d7qaOy3gILaj0cIuRa4QnAZbc8eAhiI5wBZjzLgWmePaosXn0ACIjDGj2HV7bRxS5HpFkSvGHlc7DXSGl3TcAp5QGP7qwD+BNDYiYKuyszFGgXPGmGjFJzNgjDHAGWCDmqpubI3QG/t74Tng/RLvTxLm5xmjBnCeMM0rGZeAmkez3wxMVaDrPOhNMVeKP4HXWGY3BzsqvQr8UZGmpgF+wn5tVYU7wDR2ahtPb3e52AGMVKjlusH2sKE6mX7HrcI99P8FEfYwwqBifuANGKYaA+5h+xofbATWBdCSRDADZrD7AdMurovIkg+BMWYIOzrtcLEPeEZZ5zzAcfTG1fvAB8BwgCWxYcd9X1HvcdD7GPoB2K5deA8jtrtcGpobYD9aFkoSzQIjoYtPmDBC+R3lBWA0EpHb2OlwUQh2AzLoeb6uhDZXvHFbFE0RuR1PhKZKEJ0WkVaJ9wvB5TxdgmIqJgKYAB7g34xuUmHTz/gpFNkweQBMiLh9ARGZA64UcHG6yqafhss9XeDVK67mrn2BCwWIQmyA+KKIhk6tSQM+xn9S9CgaMI+tFUgYICJ3gZOeZDOez4eAr4aTrlaguwUAnPUkfNozeQj4LObMYGvsoMsAN1+f9CA86PFsKPhomPzPN0nG8NIi/5Dy0ioOg4c9dLZ6cmQQ18l/SOoe8FbFhRvgXfJP4f0OSbkkvsfkLgHjFRRfA77x0OV/TC6RzPegZBt7+GBtgMLXAW/jv2Re7KBkInGRo7K/ACeAUYXCNwDvAb8W0FHuqKwTUOaw9F/AZ9jrLZs9m/kb2HPDfxfMneuwdK5bY2556kPgnRUfzoYAP2Kvw7WxZ4HjW2BjwLiLp4BnS+QB+Ag4IXmW4Tyb42BemEiZMLhXZhIm1BnUS1MpIwbz2lzKhMG9OJky4pG8Ojvwl6eDGNCVoM+vz/8LPV93/9ZULQ4AAAAASUVORK5CYII=\"","import styled from \"styled-components\";\nimport { grey } from \"../../constants/colors\";\nimport { SMALL } from \"../../constants/sizes\";\nimport { Wrapper } from \"../layout\";\n\nexport const HeaderContainer = styled.header`\n    padding-top: ${SMALL};\n    padding-bottom: ${SMALL};\n    background-color: ${grey.light};\n`;\n\nexport const HeaderWrapper = styled(Wrapper)`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n`;\n","import 'firebase/auth';\nimport React from 'react';\nimport { logo } from '../../constants/appConfig';\nimport Search from '../Search';\nimport UserAvatar from '../UserAvatar';\nimport { HeaderContainer, HeaderWrapper } from './styled';\n\nexport default function Header() {\n    return (\n        <HeaderContainer>\n            <HeaderWrapper>\n                <img {...logo} alt={logo.alt} />\n                <Search />\n                <UserAvatar />\n            </HeaderWrapper>\n        </HeaderContainer>\n    )\n}\n","const Heart = () => {\n    return (\n        <svg version=\"1\" viewBox=\"0 0 44 44\" width=\"26px\" height=\"26px\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"m32 4c-4.2 0-7.9 2.1-10 5.4-2.1-3.3-5.8-5.4-10-5.4-6.6 0-12 5.4-12 12 0 11.9 22 24 22 24s22-12 22-24c0-6.6-5.4-12-12-12z\"/>\n        </svg>\n    );\n}\n\nexport default Heart;\n","import { collections } from \"../constants/appConfig\";\nimport { projectFirestore } from \"./config\";\n\nexport const getStatsByLinkId = async (id) => {\n    const ref = projectFirestore.collection(collections.STATS).doc(id);\n    const snap = await ref.get();\n    const data = snap.data() || {};\n    return {\n        ref,\n        snap,\n        data,\n    };\n};\n","import { collections } from \"../constants/appConfig\";\nimport { projectFirestore } from \"./config\";\nimport { getStatsByLinkId } from \"./stats\";\n\nexport const getUserCollection = async (collectionName, user) => {\n    const collectionRef = projectFirestore.collection(collections.USERS)\n        .doc(user.uid).collection('lists').doc(collectionName);\n    const collectionData = await collectionRef.get();\n\n    return { collectionRef, collectionData };\n};\n\nexport const addLinkToCollection = async (collectionName, id, user) => {\n    if (!user) {\n        console.log('Invalid user :(');\n        return;\n    }\n\n    const linkRef = projectFirestore.collection(collections.LINKS).doc(id);\n    const link = await linkRef.get();\n    if (!link.exists) {\n        console.log('Document not found :(');\n        return;\n    }\n\n    const { collectionRef, collectionData } = await getUserCollection(collectionName, user);\n\n    const batch = projectFirestore.batch();\n\n    if (collectionData.exists) {\n        const { items } = (collectionData.data() || {});\n        if (items instanceof Array && items.includes(link.id)) {\n            console.log(`Item ${link.id} already added to ${collectionName}.`);\n            return;\n        }\n        batch.update(collectionRef, { items: [...items, link.id] });\n    } else {\n        batch.set(collectionRef, { name: collectionName, items: [link.id] });\n    }\n\n    const stats = await getStatsByLinkId(id);\n    const count = stats.data.likes || 0;\n    batch.set(stats.ref, { likes: count + 1 }, { merge: true });\n\n    return await batch.commit();\n};\n\nexport const removeLinkFromCollection = async (collectionName, id, user) => {\n    if (!user) {\n        console.log('Invalid user :(');\n        return;\n    }\n\n    const linkRef = projectFirestore.collection(collections.LINKS).doc(id);\n    const link = await linkRef.get();\n    if (!link.exists) {\n        console.log('Document not found :(');\n        return;\n    }\n\n    const { collectionRef, collectionData } = await getUserCollection(collectionName, user);\n\n    const batch = projectFirestore.batch();\n\n    if (collectionData.exists) {\n        const { items } = (collectionData.data() || {});\n        if (!(items instanceof Array) || !items.includes(link.id)) {\n            console.log(`Item ${link.id} not in collection ${collectionName}`);\n            return;\n        }\n        batch.update(collectionRef, { items: items.filter((item) => item !== link.id) });\n    }\n\n    const stats = await getStatsByLinkId(id);\n    const count = stats.data.likes || 0;\n    if (count > 0) {\n        batch.set(stats.ref, { likes: count - 1 }, { merge: true });\n    }\n\n    return await batch.commit();\n};\n","import { useEffect, useState } from \"react\";\nimport { getUserCollection } from \"../firebase/userCollections\";\nimport firebase from 'firebase/app';\n\ntype UserCollectionReference = firebase.firestore.DocumentReference<firebase.firestore.DocumentData> | undefined;\n\ntype UserCollectionData = firebase.firestore.DocumentData | undefined;\n\nconst useUserCollection = (collectionName: string, user: firebase.User) => {\n    const [reference, setReference] = useState<UserCollectionReference>();\n    const [collection, setCollection] = useState<UserCollectionData>();\n\n    useEffect(() => {\n        if (!user) {\n            return;\n        }\n\n        getUserCollection(collectionName, user).then(({\n            collectionRef,\n            collectionData,\n        }) => {\n            setReference(collectionRef);\n            setCollection(collectionData.data());\n        }).catch((error) => {\n            console.warn(error);\n        });\n    }, [collectionName, user]);\n\n    return { collection, reference };\n};\n\nexport default useUserCollection;\n","import styled, { css } from \"styled-components\";\nimport { grey, uiColors } from \"../../constants/colors\";\nimport { LARGE, MEDIUM, SMALL } from \"../../constants/sizes\";\nimport { NakedButton } from \"../form\";\nimport { BasePreviewImage, HorizontalLayout } from \"../layout\";\n\nexport const LinkItemWrapper = styled.li`\n    margin-bottom: ${LARGE};\n    border-radius: ${MEDIUM};\n    box-shadow: 0 3px 0 ${grey.light};\n`;\n\nexport const LinkItemLink = styled.a`\n    word-break: break-word;\n    font-size: 1.4em;\n    color: ${uiColors.idle};\n    text-decoration: none;\n\n    &:hover, &:focus, &:active {\n        color: ${uiColors.hover};\n        text-decoration: underline;\n    }\n`;\n\nexport const LinkMetadata = styled.p`\n    font-size: 0.8em;\n`;\n\nexport const LinkPreviewImage = styled(BasePreviewImage)`\n    margin-right: ${LARGE};\n    margin-bottom: ${LARGE};\n`;\n\nexport const InteractionToolBarWrapper = styled(HorizontalLayout)`\n    justify-content: flex-end;\n    margin-top: ${MEDIUM};\n    margin-bottom: ${MEDIUM};\n`;\n\nexport const LinkInteractionButton = styled(NakedButton)`\n    display: flex;\n    align-items: center;\n    border-radius: 999px;\n    margin-right: ${SMALL};\n    color: ${({ active }) => active ? uiColors.active : grey.mid};\n    transition-property: background-color;\n\n    ${({ children }) => typeof children === 'string'\n    ? css`\n        padding: ${SMALL} ${MEDIUM};\n    `\n    : css`\n        padding: ${SMALL};\n    `}\n\n    &:hover, &:focus, &:active {\n        color: ${({ activeColor }) => (activeColor && uiColors[activeColor]) || uiColors.hover};\n    }\n\n    &:active {\n        transform: scale(0.9);\n    }\n\n    svg {\n        display: block;\n        color: inherit;\n\n        > * {\n            fill: currentColor;\n        }\n    }\n`;\n\nexport const LinkItemButtonLabel = styled.span`\n    display: inline-block;\n    margin-left: ${SMALL};\n`;\n","import { useContext } from \"react\";\nimport { GlobalContext } from \"../../context/GlobalContext\";\nimport { LinkInteractionButton } from \"./styled\";\n\nconst DeleteButton = ({ id }) => {\n    const { remove } = useContext(GlobalContext);\n\n    return (\n        <LinkInteractionButton\n            title=\"Apagar publicação\"\n            aria-label=\"Apagar publicação\"\n            onClick={() => remove(id)}\n        >\n            DELETAR\n        </LinkInteractionButton>\n    )\n}\n\nexport default DeleteButton;\n","// import Bookmark from \"../../assets/icons/Bookmark\";\n// import Copy from \"../../assets/icons/Copy\";\nimport { useContext, useEffect, useState } from \"react\";\nimport Heart from \"../../assets/icons/Heart\";\nimport { GlobalContext } from \"../../context/GlobalContext\";\nimport { addLinkToCollection, removeLinkFromCollection } from \"../../firebase/userCollections\";\nimport useAuth from \"../../hooks/useAuth\";\nimport useUserCollection from \"../../hooks/useUserCollection\";\nimport DeleteButton from \"./DeleteButton\";\nimport { InteractionToolBarWrapper, LinkInteractionButton, LinkItemButtonLabel } from \"./styled\";\n\nconst isIncluded = (id, collection) => Array.isArray(collection) && collection.includes(id);\n\nconst InteractionToolBar = ({ id }) => {\n    const { stats } = useContext(GlobalContext);\n    const { user, userConfig } = useAuth();\n    const [isLiked, setIsLiked] = useState(false);\n    const { collection: likesCollection } = useUserCollection('Likes', user);\n    const linkStats = stats.find((item) => item.id === id);\n\n    useEffect(() => {\n        setIsLiked(isIncluded(id, likesCollection?.items));\n    }, [id, likesCollection?.items])\n\n    const handleLikeButton = () => {\n        try {\n            if (!user || isLiked) {\n                removeLinkFromCollection('Likes', id, user);\n                setIsLiked(false);\n            } else {\n                addLinkToCollection('Likes', id, user);\n                setIsLiked(true);\n            }\n        } catch (error) {\n            console.warn(error);\n        }\n    };\n\n    return (\n        <InteractionToolBarWrapper>\n            {userConfig.moderator && <DeleteButton id={id} />}\n\n            {user && <LinkInteractionButton\n                title=\"Marcar como gostei\"\n                aria-label=\"Marcar como gostei\"\n                onClick={handleLikeButton}\n                active={ isLiked }\n            >\n                <Heart />\n                <LinkItemButtonLabel>\n                    {linkStats?.likes || 0}\n                </LinkItemButtonLabel>\n            </LinkInteractionButton>}\n            {/* <LinkInteractionButton\n                title=\"Salvar para a minha lista\"\n                aria-label=\"Salvar para a minha lista\"\n            >\n                <Bookmark />\n            </LinkInteractionButton>\n            <LinkInteractionButton\n                title=\"Copiar o endereço do link\"\n                aria-label=\"Copiar o endereço do link\"\n            >\n                <Copy />\n            </LinkInteractionButton> */}\n        </InteractionToolBarWrapper>\n    )\n}\n\nexport default InteractionToolBar;\n","import React from 'react';\nimport { HorizontalLayout, VerticalLayout } from '../layout';\nimport InteractionToolBar from './InteractionToolBar';\nimport { LinkItemLink, LinkItemWrapper, LinkMetadata, LinkPreviewImage } from './styled';\n\nconst ROW_BREAKPOINT = 600;\n\nconst getDate = (link) => {\n    if (!(link?.createdAt?.toDate && link.createdAt.toDate instanceof Function)) {\n        return new Date(0);\n    }\n    return link.createdAt.toDate();\n};\n\nexport default function LinkItem({ link }) {\n    const date = getDate(link);\n\n    return (\n        <LinkItemWrapper key={link.id}>\n            <HorizontalLayout breakUnder={ROW_BREAKPOINT}>\n                {link.image && <LinkPreviewImage src={link.image} alt={link.title} />}\n\n                <VerticalLayout expand>\n                    <p>\n                        <LinkItemLink\n                            href={link.url}\n                            target=\"_blank\"\n                            rel=\"noreferrer\">\n                            {link.title || link.url}\n                        </LinkItemLink>\n                    </p>\n                    <LinkMetadata>\n                        <strong>{link.author?.displayName}</strong>\n                        <span>{` em ${date.toLocaleString()}`}</span>\n                    </LinkMetadata>\n\n                    {link.description?.split('\\n').filter((s) => s).map((text, index) => (\n                        <p key={`${index}: ${text}`}>{text}</p>\n                    ))}\n\n                    <InteractionToolBar {...link} />\n                </VerticalLayout>\n            </HorizontalLayout>\n        </LinkItemWrapper>\n    );\n}\n","import styled from \"styled-components\";\nimport { grey, uiColors } from \"../../constants/colors\";\nimport { EXTRA_LARGE, EXTRA_SMALL, LARGE, MEDIUM, SMALL } from \"../../constants/sizes\";\nimport { NakedButton } from \"../form\";\nimport { HorizontalLayout } from \"../layout\";\nimport { Message } from \"../messages\";\n\nexport const LinkListWrapper = styled.div`\n    margin-top: ${EXTRA_LARGE};\n    margin-bottom: ${EXTRA_LARGE};\n`;\n\nexport const LinkListHeader = styled(HorizontalLayout)`\n    margin-bottom: ${LARGE};\n    padding-bottom: ${EXTRA_SMALL};\n    border-bottom: 1px solid ${grey.mid};\n`;\n\nexport const LinkFilterButton = styled(NakedButton)`\n    padding-top: ${EXTRA_SMALL};\n    padding-bottom: ${EXTRA_SMALL};\n    margin-left: ${MEDIUM};\n`;\n\nexport const LinkListElement = styled.ul`\n    list-style: none;\n    margin: 0;\n    padding: 0;\n`;\n\nexport const NextButton = styled(NakedButton)`\n    display: block;\n    width: 100%;\n    margin: 0;\n    padding: ${SMALL};\n    text-align: center;\n    color: ${uiColors.idle};\n`;\n\nexport const NextLoadingMessage = styled(Message)`\n    margin: 0;\n    padding: ${SMALL};\n    text-align: center;\n`;\n","import { useContext } from 'react';\nimport { GlobalContext } from '../../context/GlobalContext';\nimport LinkItem from '../LinkItem';\nimport { LinkFilterButton, LinkListElement, LinkListHeader, LinkListWrapper, NextButton, NextLoadingMessage } from './styled';\n\nconst LoadMore = ({ next, loading, empty, ended }) => {\n    if (ended) {\n        return (\n            <p>Não há mais resultados.</p>\n        );\n    }\n\n    if (loading) {\n        return (\n            <NextLoadingMessage>\n                Carregando...\n            </NextLoadingMessage>\n        );\n    }\n\n    if (empty) {\n        return (\n            <p>Nada para exibir :( Tente uma pesquisa diferente.</p>\n        )\n    }\n\n    return (\n        <NextButton\n            onClick={() => next()}\n        >\n            Carregar mais\n        </NextButton>\n    );\n};\n\nexport default function LinkList() {\n    const {\n        links, search, loading, ended,\n        next, requestSearch,\n    } = useContext(GlobalContext);\n\n    return (\n        <LinkListWrapper>\n            {search && (\n                <LinkListHeader>\n                    <p>Pesquisando por: <strong>{search}</strong>.</p>\n                    <LinkFilterButton onClick={() => requestSearch('')}>\n                        Remover filtro\n                    </LinkFilterButton>\n                </LinkListHeader>\n            )}\n\n            <LinkListElement>\n                {links.map((link) => (\n                    <LinkItem key={link.id} link={link} />\n                ))}\n            </LinkListElement>\n\n            <LoadMore\n                next={next}\n                loading={loading}\n                empty={!links.length}\n                ended={ended} />\n        </LinkListWrapper>\n    )\n}\n","import React from 'react';\nimport AddLink from './components/AddLink';\nimport Header from './components/Header';\nimport { Wrapper } from './components/layout';\nimport LinkList from './components/LinkList';\n\nfunction App() {\n  return (\n    <>\n      <Header />\n      <Wrapper>\n        <AddLink />\n        <LinkList />\n      </Wrapper>\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { GlobalProvider } from './context/GlobalContext';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <GlobalProvider>\n      <App />\n    </GlobalProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}